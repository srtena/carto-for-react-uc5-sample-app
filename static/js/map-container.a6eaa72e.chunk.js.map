{"version":3,"sources":["utils/htmlForFeature.js","utils/formatter.js","components/layers/UsaDemographicsLayer.js","components/layers/StoresLayer.js","components/layers/EnrichedStoresLayer.js","../node_modules/@material-ui/icons/RemoveOutlined.js","../node_modules/@material-ui/icons/AddOutlined.js","components/common/ZoomControl.js","assets/img/carto-logo-map.svg","components/views/main/MapContainer.js","components/layers/index.js"],"names":["FORMATTER_TYPES","Object","freeze","CURRENCY","NUMBER","formatterFunctions","value","formatted","currencyFormatter","prefix","numberFormatter","DEFAULT_FORMATTER","type","columns","htmlForFeature","title","feature","formatter","includeColumns","showColumnName","Error","propertyNames","keys","properties","supportedTypes","values","includes","isArrayOfStrings","column","available","join","isFormatterValid","includedColumnsAreValid","html","name","generateHtml","propertyName","formatterFunction","v","concat","Array","isArray","length","every","String","DEFAULT_LOCALE","Intl","NumberFormat","maximumFractionDigits","minimumFractionDigits","notation","compactDisplay","format","isNaN","_value","parseLogicalOperation","operation","replace","USA_DEMOGRAPHICS_LAYER_ID","UsaDemographicsLayer","usaDemographicsLayer","useSelector","state","carto","layers","source","selectSourceById","cartoLayerProps","useCartoLayerProps","CartoLayer","id","getFillColor","pointRadiusMinPixels","pickable","onHover","info","object","style","STORES_LAYER_ID","StoresLayer","storesLayer","ENRICHED_STORES_LAYER_ID","EnrichedStoresLayer","enrichedStoresLayer","_interopRequireDefault","require","_interopRequireWildcard","defineProperty","exports","default","React","_default","createElement","d","useStyles","makeStyles","theme","zoomControl","backgroundColor","palette","background","paper","width","ZoomControl","className","showCurrentZoom","dispatch","useDispatch","zoomLevel","Math","floor","viewState","zoom","classes","increaseZoom","useCallback","setViewState","decreaseZoom","Grid","container","direction","alignItems","IconButton","onClick","aria-label","Divider","orientation","flexItem","Box","px","minWidth","Typography","display","align","color","variant","_defs","_g","_excluded","_extends","assign","target","i","arguments","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgCartoLogoMap","_ref","svgRef","titleId","props","height","viewBox","xmlns","xmlnsXlink","ref","undefined","in","stroke","strokeWidth","fill","fillRule","filter","fillOpacity","ForwardRef","Map","lazy","mapWrapper","position","flex","overflow","zIndex","bottom","spacing","left","breakpoints","down","cartoLogoMap","transform","gmaps","MapContainer","isGmaps","BASEMAPS","basemap","item","Hidden","xsDown"],"mappings":"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","file":"static/js/map-container.a6eaa72e.chunk.js","sourcesContent":["import { currencyFormatter, numberFormatter } from 'utils/formatter';\n\nconst FORMATTER_TYPES = Object.freeze({\n  CURRENCY: 'currency',\n  NUMBER: 'number',\n});\n\nconst formatterFunctions = {\n  [FORMATTER_TYPES.CURRENCY](value) {\n    const formatted = currencyFormatter(value);\n    return `${formatted.prefix}${formatted.value}`;\n  },\n  [FORMATTER_TYPES.NUMBER](value) {\n    return numberFormatter(value);\n  },\n};\n\nconst DEFAULT_FORMATTER = {\n  type: '',\n  columns: [],\n};\n\nexport default function htmlForFeature({\n  title,\n  feature,\n  formatter = DEFAULT_FORMATTER,\n  includeColumns = '*',\n  showColumnName = true,\n}) {\n  if (!feature) {\n    throw new Error(`htmlForFeature needs \"info.object\" information`);\n  }\n\n  const propertyNames = Object.keys(feature.properties);\n\n  if (\n    formatter?.type &&\n    formatter?.columns &&\n    !isFormatterValid(propertyNames, formatter)\n  ) {\n    return;\n  }\n\n  if (!includedColumnsAreValid(propertyNames, includeColumns)) {\n    return;\n  }\n\n  let html = '';\n\n  if (title) {\n    html = `<h3 style=\"margin: 0\"><strong>${title}</strong></h3>`;\n  }\n\n  for (const name of propertyNames) {\n    if (\n      name !== 'layerName' &&\n      (includeColumns.includes(name) || includeColumns === '*')\n    ) {\n      if (formatter?.columns.includes(name)) {\n        const formatterFunction = formatterFunctions[formatter.type];\n        html = generateHtml(feature, name, showColumnName, html, formatterFunction);\n      } else {\n        html = generateHtml(feature, name, showColumnName, html);\n      }\n    }\n  }\n\n  return html;\n}\n\nfunction generateHtml(\n  feature,\n  propertyName,\n  showColumnName,\n  html,\n  formatterFunction = (v) => v\n) {\n  return html.concat(\n    `${showColumnName ? `<strong>${propertyName}</strong>: ` : ''}${formatterFunction(\n      feature.properties[propertyName]\n    )}<br/>`\n  );\n}\n\nfunction isFormatterValid(properties, formatter) {\n  const supportedTypes = Object.values(FORMATTER_TYPES);\n\n  if (!supportedTypes.includes(formatter.type)) {\n    throw new Error(\n      `\"${formatter.type}\" is not supported as formatter, use one of \"${supportedTypes}\"`\n    );\n  }\n\n  if (!isArrayOfStrings(formatter.columns)) {\n    throw new Error(`\"formatter.columns\" property needs to be an array of strings`);\n  }\n\n  for (const column of formatter.columns) {\n    if (!properties.includes(column)) {\n      const available = properties.join(', ');\n      throw new Error(\n        `\"formatted.columns\" includes '${column}' but it was not found!. Available cols are [${available}]`\n      );\n    }\n  }\n\n  return true;\n}\n\nfunction includedColumnsAreValid(properties, includeColumns) {\n  if (includeColumns === '*') {\n    return true;\n  }\n\n  if (!isArrayOfStrings(includeColumns)) {\n    throw new Error(\n      `\"includeColumns\" property needs to be an array of existing feature columns or \"*\"`\n    );\n  }\n\n  if (isArrayOfStrings(includeColumns)) {\n    for (const column of includeColumns) {\n      if (!properties.includes(column)) {\n        throw new Error('colums set in \"includeColumns\" should exist in picked feature');\n      }\n    }\n  }\n\n  return true;\n}\n\nfunction isArrayOfStrings(value) {\n  return Array.isArray(value) && value.length && value.every(String);\n}\n","// int-numberformat dependencies (support for ios v13)\nimport '@formatjs/intl-locale/polyfill';\nimport '@formatjs/intl-getcanonicallocales/polyfill';\n\n// int-pluralrules dependencies (support for ios v12)\nimport '@formatjs/intl-pluralrules/polyfill';\nimport '@formatjs/intl-pluralrules/locale-data/en';\n\n/*\n  Note: `notation` & `compactDisplay` properties are not supported yet by Safari.\n  Those require the use of a polyfill: https://www.npmjs.com/package/@formatjs/intl-numberformat\n*/\nimport '@formatjs/intl-numberformat/polyfill';\nimport '@formatjs/intl-numberformat/locale-data/en';\n\nconst DEFAULT_LOCALE = 'en-US';\n\nexport const currencyFormatter = (value) => {\n  return {\n    prefix: '$',\n    value: Intl.NumberFormat(DEFAULT_LOCALE, {\n      maximumFractionDigits: 2,\n      minimumFractionDigits: 2,\n      notation: 'compact',\n      compactDisplay: 'short',\n    }).format(isNaN(value) ? 0 : value),\n  };\n};\n\nexport const numberFormatter = (value) => {\n  const _value = parseLogicalOperation(value);\n  return (\n    _value.operation +\n    Intl.NumberFormat(DEFAULT_LOCALE, {\n      maximumFractionDigits: 1,\n      minimumFractionDigits: 0,\n      notation: 'compact',\n      compactDisplay: 'short',\n    }).format(_value.value)\n  );\n};\n\nconst parseLogicalOperation = (value) => {\n  if (!isNaN(value)) return { value, operation: '' };\n\n  try {\n    const _value = value.replace('>', '');\n    return isNaN(_value)\n      ? { value: 0, operation: '' }\n      : { value: _value, operation: '> ' };\n  } catch {\n    throw new Error(`You are using a numberFormatter on a not valid value: ${value}`);\n  }\n};\n","import { useSelector } from 'react-redux';\nimport { CartoLayer } from '@deck.gl/carto';\nimport { selectSourceById } from '@carto/react-redux';\nimport { useCartoLayerProps } from '@carto/react-api';\nimport htmlForFeature from 'utils/htmlForFeature';\n\nexport const USA_DEMOGRAPHICS_LAYER_ID = 'usaDemographicsLayer';\n\nexport default function UsaDemographicsLayer() {\n  const { usaDemographicsLayer } = useSelector((state) => state.carto.layers);\n  const source = useSelector((state) => selectSourceById(state, usaDemographicsLayer?.source));\n  const cartoLayerProps = useCartoLayerProps({ source });\n\n  if (usaDemographicsLayer && source) {\n    return new CartoLayer({\n      ...cartoLayerProps,\n      id: USA_DEMOGRAPHICS_LAYER_ID,\n      getFillColor: [241, 109, 122],\n      pointRadiusMinPixels: 2,\n      pickable: true,\n      onHover: (info) => {\n        if (info?.object) {\n          info.object = {\n            html: htmlForFeature({ feature: info.object }),\n            style: {},\n          };\n        }\n      },\n    });\n  }\n}\n","import { useSelector } from 'react-redux';\nimport { CartoLayer } from '@deck.gl/carto';\nimport { selectSourceById } from '@carto/react-redux';\nimport { useCartoLayerProps } from '@carto/react-api';\nimport htmlForFeature from 'utils/htmlForFeature';\n\nexport const STORES_LAYER_ID = 'storesLayer';\n\nexport default function StoresLayer() {\n  const { storesLayer } = useSelector((state) => state.carto.layers);\n  const source = useSelector((state) => selectSourceById(state, storesLayer?.source));\n  const cartoLayerProps = useCartoLayerProps({ source });\n\n  if (storesLayer && source) {\n    return new CartoLayer({\n      ...cartoLayerProps,\n      id: STORES_LAYER_ID,\n      getFillColor: [255, 255, 100],\n      pointRadiusMinPixels: 2,\n      pickable: true,\n      onHover: (info) => {\n        if (info?.object) {\n          info.object = {\n            html: htmlForFeature({ feature: info.object }),\n            style: {},\n          };\n        }\n      },\n    });\n  }\n}\n","import { useSelector } from 'react-redux';\nimport { CartoLayer } from '@deck.gl/carto';\nimport { selectSourceById } from '@carto/react-redux';\nimport { useCartoLayerProps } from '@carto/react-api';\nimport htmlForFeature from 'utils/htmlForFeature';\n\nexport const ENRICHED_STORES_LAYER_ID = 'enrichedStoresLayer';\n\nexport default function EnrichedStoresLayer() {\n  const { enrichedStoresLayer } = useSelector((state) => state.carto.layers);\n  const source = useSelector((state) => selectSourceById(state, enrichedStoresLayer?.source));\n  const cartoLayerProps = useCartoLayerProps({ source });\n\n  if (enrichedStoresLayer && source) {\n    return new CartoLayer({\n      ...cartoLayerProps,\n      id: ENRICHED_STORES_LAYER_ID,\n      getFillColor: [241, 109, 122],\n      pointRadiusMinPixels: 2,\n      pickable: true,\n      onHover: (info) => {\n        if (info?.object) {\n          info.object = {\n            html: htmlForFeature({ feature: info.object }),\n            style: {},\n          };\n        }\n      },\n    });\n  }\n}\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13H5v-2h14v2z\"\n}), 'RemoveOutlined');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'AddOutlined');\n\nexports.default = _default;","import { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  Box,\n  Divider,\n  Grid,\n  IconButton,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport AddOutlinedIcon from '@material-ui/icons/AddOutlined';\nimport RemoveOutlinedIcon from '@material-ui/icons/RemoveOutlined';\nimport { setViewState } from '@carto/react-redux';\n\nconst useStyles = makeStyles((theme) => ({\n  zoomControl: {\n    backgroundColor: theme.palette.background.paper,\n    width: 'auto',\n  },\n}));\n\nexport default function ZoomControl({ className, showCurrentZoom }) {\n  const dispatch = useDispatch();\n  const zoomLevel = useSelector((state) => Math.floor(state.carto.viewState.zoom));\n  const classes = useStyles();\n\n  const increaseZoom = useCallback(() => {\n    dispatch(setViewState({ zoom: zoomLevel + 1 }));\n  }, [dispatch, zoomLevel]);\n\n  const decreaseZoom = useCallback(() => {\n    dispatch(setViewState({ zoom: zoomLevel - 1 }));\n  }, [dispatch, zoomLevel]);\n\n  return (\n    <Grid\n      container\n      direction='row'\n      alignItems='center'\n      className={`${className} ${classes.zoomControl}`}\n    >\n      <IconButton onClick={decreaseZoom} aria-label='Decrease zoom'>\n        <RemoveOutlinedIcon />\n      </IconButton>\n      <Divider orientation='vertical' flexItem />\n      {showCurrentZoom && (\n        <Box px={1} minWidth={36}>\n          <Typography\n            display='block'\n            align='center'\n            color='textSecondary'\n            variant='overline'\n          >\n            {zoomLevel}\n          </Typography>\n        </Box>\n      )}\n      <Divider orientation='vertical' flexItem />\n      <IconButton onClick={increaseZoom} aria-label='Increase zoom'>\n        <AddOutlinedIcon />\n      </IconButton>\n    </Grid>\n  );\n}\n","var _defs, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCartoLogoMap(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"62px\",\n    height: \"24px\",\n    viewBox: \"0 0 62 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"CARTO Components/Logo/Positive/Logo\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"filter\", {\n    id: \"filter-1\"\n  }, /*#__PURE__*/React.createElement(\"feColorMatrix\", {\n    in: \"SourceGraphic\",\n    type: \"matrix\",\n    values: \"0 0 0 0 0.172549 0 0 0 0 0.188235 0 0 0 0 0.196078 0 0 0 0.600000 0\"\n  })))), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Page-1\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"CARTO-Components/Logo/Positive/Logo\",\n    filter: \"url(#filter-1)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Logo\",\n    fill: \"#162945\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M49.226087,24 C55.8390965,24 61.2,18.627417 61.2,12 C61.2,5.372583 55.8390965,0 49.226087,0 C42.6130774,0 37.2521739,5.372583 37.2521739,12 C37.2521739,18.627417 42.6130774,24 49.226087,24 Z\",\n    id: \"Halo\",\n    fillOpacity: 0.1\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.15947729,15.9877346 C5.83227729,15.9877346 6.79902534,15.2552013 7.51593962,14.260268 L5.93003832,13.1232013 C5.47382014,13.6808013 5.00673962,14.0525346 4.21378897,14.0525346 C3.14927988,14.0525346 2.39977858,13.1560013 2.39977858,12.0080013 L2.39977858,11.9861346 C2.39977858,10.8709346 3.14927988,9.95253464 4.21378897,9.95253464 C4.9415656,9.95253464 5.44123313,10.3133346 5.87572664,10.849068 L7.46162793,9.6136013 C6.788163,8.68426797 5.78882793,8.02826797 4.23551365,8.02826797 C1.93269806,8.02826797 0.238173389,9.7776013 0.238173389,12.0080013 L0.238173389,12.029868 C0.238173389,14.3149346 1.98700975,15.9877346 4.15947729,15.9877346 L4.15947729,15.9877346 Z M11.1304487,15.834668 L13.3355032,15.834668 L13.8786201,14.457068 L16.8223136,14.457068 L17.3654305,15.834668 L19.6247967,15.834668 L16.3878201,8.12666797 L14.3565629,8.12666797 L11.1304487,15.834668 Z M14.4977733,12.8061346 L15.355898,10.6413346 L16.2031604,12.8061346 L14.4977733,12.8061346 Z M23.728111,15.834668 L25.8354045,15.834668 L25.8354045,13.5168013 L26.7695655,13.5168013 L28.3011551,15.834668 L30.7234564,15.834668 L28.909446,13.1669346 C29.8544694,12.7624013 30.4736226,11.9861346 30.4736226,10.8053346 L30.4736226,10.783468 C30.4736226,10.029068 30.2455135,9.4496013 29.8001577,9.00133464 C29.2896278,8.48746797 28.4858148,8.18133464 27.3235447,8.18133464 L23.728111,8.18133464 L23.728111,15.834668 Z M25.8354045,11.8549346 L25.8354045,10.0072013 L27.2257837,10.0072013 C27.9209733,10.0072013 28.3663291,10.3133346 28.3663291,10.9256013 L28.3663291,10.947468 C28.3663291,11.505068 27.942698,11.8549346 27.236646,11.8549346 L25.8354045,11.8549346 Z M49.226087,8 C51.4304235,8 53.2173913,9.790861 53.2173913,12 C53.2173913,14.209139 51.4304235,16 49.226087,16 C47.0217504,16 45.2347826,14.209139 45.2347826,12 C45.2347826,9.790861 47.0217504,8 49.226087,8 Z M41.1486512,8.18133464 L41.1486512,10.0400013 L38.8675603,10.0400013 L38.8675603,15.834668 L36.7602667,15.834668 L36.7602667,10.0400013 L34.4900382,10.0400013 L34.4900382,8.18133464 L41.1486512,8.18133464 Z\"\n  }))))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCartoLogoMap);\nexport default __webpack_public_path__ + \"static/media/carto-logo-map.5c7c203f.svg\";\nexport { ForwardRef as ReactComponent };","import { lazy } from 'react';\nimport { BASEMAPS } from '@carto/react-basemaps';\nimport ZoomControl from 'components/common/ZoomControl';\nimport { getLayers } from 'components/layers';\nimport { ReactComponent as CartoLogoMap } from 'assets/img/carto-logo-map.svg';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useSelector } from 'react-redux';\nimport { Grid, Hidden } from '@material-ui/core';\n\nconst Map = lazy(() => import(/* webpackChunkName: 'map' */ 'components/common/map/Map'));\n\nconst useStyles = makeStyles((theme) => ({\n  mapWrapper: {\n    position: 'relative',\n    display: 'flex',\n    flex: '1 1 auto',\n    overflow: 'hidden',\n\n    // [theme.breakpoints.down('xs')]: {\n    //   height: `calc(100% - ${theme.spacing(12) - 1}px)`, // Minus 1 to fix that weirdly sometimes the bottom sheet is 1px lower than needed\n    // },\n\n    // Fix Mapbox attribution button not clickable\n    '& #deckgl-wrapper': {\n      '& #deckgl-overlay': {\n        zIndex: 1,\n      },\n      '& #view-default-view > div': {\n        zIndex: 'auto !important',\n      },\n    },\n  },\n  zoomControl: {\n    position: 'absolute',\n    bottom: theme.spacing(4),\n    left: theme.spacing(4),\n    zIndex: 1,\n\n    [theme.breakpoints.down('xs')]: {\n      display: 'none',\n    },\n  },\n  cartoLogoMap: {\n    position: 'absolute',\n    bottom: theme.spacing(4),\n    left: '50%',\n    transform: 'translateX(-50%)',\n  },\n  gmaps: {\n    '& $zoomControl': {\n      left: theme.spacing(4),\n      bottom: theme.spacing(5),\n    },\n  },\n}));\n\nexport default function MapContainer() {\n  const isGmaps = useSelector((state) => BASEMAPS[state.carto.basemap].type === 'gmaps');\n  const classes = useStyles();\n\n  const layers = getLayers();\n\n  return (\n    <Grid item className={`${classes.mapWrapper} ${isGmaps ? classes.gmaps : ''}`}>\n      <Map layers={layers} />\n      <Hidden xsDown>\n        <ZoomControl className={classes.zoomControl} showCurrentZoom />\n      </Hidden>\n      {!isGmaps && <CartoLogoMap className={classes.cartoLogoMap} />}\n    </Grid>\n  );\n}\n","import StoresLayer from './StoresLayer';\nimport UsaDemographicsLayer from './UsaDemographicsLayer';\nimport EnrichedStoresLayer from './EnrichedStoresLayer';\n// [hygen] Import layers\n\nexport const getLayers = () => {\n  return [\n    StoresLayer(),\n    UsaDemographicsLayer(),\n    EnrichedStoresLayer(),\n    // [hygen] Add layer\n  ];\n};\n"],"sourceRoot":""}