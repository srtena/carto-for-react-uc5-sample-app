(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[13],{1090:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n,o=r(11),c=r(3),i=r(1092),a=Object.freeze({CURRENCY:"currency",NUMBER:"number"}),u=(n={},Object(c.a)(n,a.CURRENCY,(function(e){var t=Object(i.a)(e);return"".concat(t.prefix).concat(t.value)})),Object(c.a)(n,a.NUMBER,(function(e){return Object(i.b)(e)})),n),s={type:"",columns:[]};function l(e){var t=e.title,r=e.feature,n=e.formatter,c=void 0===n?s:n,i=e.includeColumns,l=void 0===i?"*":i,m=e.showColumnName,p=void 0===m||m;if(!r)throw new Error('htmlForFeature needs "info.object" information');var v=Object.keys(r.properties);if((!(null===c||void 0===c?void 0:c.type)||!(null===c||void 0===c?void 0:c.columns)||function(e,t){var r=Object.values(a);if(!r.includes(t.type))throw new Error('"'.concat(t.type,'" is not supported as formatter, use one of "').concat(r,'"'));if(!d(t.columns))throw new Error('"formatter.columns" property needs to be an array of strings');var n,c=Object(o.a)(t.columns);try{for(c.s();!(n=c.n()).done;){var i=n.value;if(!e.includes(i)){var u=e.join(", ");throw new Error('"formatted.columns" includes \''.concat(i,"' but it was not found!. Available cols are [").concat(u,"]"))}}}catch(s){c.e(s)}finally{c.f()}return!0}(v,c))&&function(e,t){if("*"===t)return!0;if(!d(t))throw new Error('"includeColumns" property needs to be an array of existing feature columns or "*"');if(d(t)){var r,n=Object(o.a)(t);try{for(n.s();!(r=n.n()).done;){var c=r.value;if(!e.includes(c))throw new Error('colums set in "includeColumns" should exist in picked feature')}}catch(i){n.e(i)}finally{n.f()}}return!0}(v,l)){var b="";t&&(b='<h3 style="margin: 0"><strong>'.concat(t,"</strong></h3>"));for(var y=0,j=v;y<j.length;y++){var h=j[y];if("layerName"!==h&&(l.includes(h)||"*"===l))if(null===c||void 0===c?void 0:c.columns.includes(h))b=f(r,h,p,b,u[c.type]);else b=f(r,h,p,b)}return b}}function f(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return e};return n.concat("".concat(r?"<strong>".concat(t,"</strong>: "):"").concat(o(e.properties[t]),"<br/>"))}function d(e){return Array.isArray(e)&&e.length&&e.every(String)}},1092:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return c}));r(1096),r(1101),r(1102),r(1103),r(1104),r(1105);var n="en-US",o=function(e){return{prefix:"$",value:Intl.NumberFormat(n,{maximumFractionDigits:2,minimumFractionDigits:2,notation:"compact",compactDisplay:"short"}).format(isNaN(e)?0:e)}},c=function(e){var t=i(e);return t.operation+Intl.NumberFormat(n,{maximumFractionDigits:1,minimumFractionDigits:0,notation:"compact",compactDisplay:"short"}).format(t.value)},i=function(e){if(!isNaN(e))return{value:e,operation:""};try{var t=e.replace(">","");return isNaN(t)?{value:0,operation:""}:{value:t,operation:"> "}}catch(r){throw new Error("You are using a numberFormatter on a not valid value: ".concat(e))}}},1107:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return l}));var n=r(4),o=r(191),c=r(166),i=r(278),a=r(1091),u=r(1090),s="enrichedStoresLayer";function l(){var e=Object(o.useSelector)((function(e){return e.carto.layers})).enrichedStoresLayer,t=Object(o.useSelector)((function(t){return Object(i.selectSourceById)(t,null===e||void 0===e?void 0:e.source)})),r=Object(a.useCartoLayerProps)({source:t});if(e&&t)return new c.a(Object(n.a)(Object(n.a)({},r),{},{id:s,getFillColor:[241,109,122],pointRadiusMinPixels:2,pickable:!0,onHover:function(e){(null===e||void 0===e?void 0:e.object)&&(e.object={html:Object(u.a)({feature:e.object}),style:{}})}}))}},1170:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p}));var n=r(0),o={id:"enrichedStoresSource",type:r(40).e.TABLE,connection:"bqapp",data:"cartodb-on-gcp-pm-team.atena.UC5enrichedbuffers-w-geom"},c=r(1107),i=r(191),a=r(278),u=r(551),s=r(1068),l=r(439),f=r(1114),d=r(22),m=Object(u.a)((function(){return{enrichedStores:{}}}));function p(){var e=Object(i.useDispatch)(),t=m();return Object(n.useEffect)((function(){return e(Object(a.addSource)(o)),e(Object(a.addLayer)({id:c.a,source:o.id})),function(){e(Object(a.removeLayer)(c.a)),e(Object(a.removeSource)(o.id))}}),[e]),Object(d.jsx)(s.a,{container:!0,direction:"column",className:t.enrichedStores,children:Object(d.jsx)(s.a,{item:!0,children:Object(d.jsx)("div",{children:Object(d.jsx)(f.HistogramWidget,{id:"populationByStore",title:"Store clusters by population",dataSource:o.id,ticks:[2e3,5e3,1e4,2e4],column:"population",operation:l.AggregationTypes.SUM})})})})}}}]);
//# sourceMappingURL=13.1a3af7a1.chunk.js.map