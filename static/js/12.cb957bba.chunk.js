(this["webpackJsonpcarto-for-react-uc5-sample-app"]=this["webpackJsonpcarto-for-react-uc5-sample-app"]||[]).push([[12],{1090:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var o,n=r(11),a=r(3),c=r(1092),i=Object.freeze({CURRENCY:"currency",NUMBER:"number"}),u=(o={},Object(a.a)(o,i.CURRENCY,(function(e){var t=Object(c.a)(e);return"".concat(t.prefix).concat(t.value)})),Object(a.a)(o,i.NUMBER,(function(e){return Object(c.b)(e)})),o),s={type:"",columns:[]};function l(e){var t=e.title,r=e.feature,o=e.formatter,a=void 0===o?s:o,c=e.includeColumns,l=void 0===c?"*":c,b=e.showColumnName,m=void 0===b||b;if(!r)throw new Error('htmlForFeature needs "info.object" information');var p=Object.keys(r.properties);if((!(null===a||void 0===a?void 0:a.type)||!(null===a||void 0===a?void 0:a.columns)||function(e,t){var r=Object.values(i);if(!r.includes(t.type))throw new Error('"'.concat(t.type,'" is not supported as formatter, use one of "').concat(r,'"'));if(!f(t.columns))throw new Error('"formatter.columns" property needs to be an array of strings');var o,a=Object(n.a)(t.columns);try{for(a.s();!(o=a.n()).done;){var c=o.value;if(!e.includes(c)){var u=e.join(", ");throw new Error('"formatted.columns" includes \''.concat(c,"' but it was not found!. Available cols are [").concat(u,"]"))}}}catch(s){a.e(s)}finally{a.f()}return!0}(p,a))&&function(e,t){if("*"===t)return!0;if(!f(t))throw new Error('"includeColumns" property needs to be an array of existing feature columns or "*"');if(f(t)){var r,o=Object(n.a)(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(!e.includes(a))throw new Error('colums set in "includeColumns" should exist in picked feature')}}catch(c){o.e(c)}finally{o.f()}}return!0}(p,l)){var v="";t&&(v='<h3 style="margin: 0"><strong>'.concat(t,"</strong></h3>"));for(var j=0,y=p;j<y.length;j++){var O=y[j];if("layerName"!==O&&(l.includes(O)||"*"===l))if(null===a||void 0===a?void 0:a.columns.includes(O))v=d(r,O,m,v,u[a.type]);else v=d(r,O,m,v)}return v}}function d(e,t,r,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return e};return o.concat("".concat(r?"<strong>".concat(t,"</strong>: "):"").concat(n(e.properties[t]),"<br/>"))}function f(e){return Array.isArray(e)&&e.length&&e.every(String)}},1092:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));r(1096),r(1101),r(1102),r(1103),r(1104),r(1105);var o="en-US",n=function(e){return{prefix:"$",value:Intl.NumberFormat(o,{maximumFractionDigits:2,minimumFractionDigits:2,notation:"compact",compactDisplay:"short"}).format(isNaN(e)?0:e)}},a=function(e){var t=c(e);return t.operation+Intl.NumberFormat(o,{maximumFractionDigits:1,minimumFractionDigits:0,notation:"compact",compactDisplay:"short"}).format(t.value)},c=function(e){if(!isNaN(e))return{value:e,operation:""};try{var t=e.replace(">","");return isNaN(t)?{value:0,operation:""}:{value:t,operation:"> "}}catch(r){throw new Error("You are using a numberFormatter on a not valid value: ".concat(e))}}},1095:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return l}));var o=r(4),n=r(191),a=r(166),c=r(278),i=r(1091),u=r(1090),s="usaDemographicsLayer";function l(){var e=Object(n.useSelector)((function(e){return e.carto.layers})).usaDemographicsLayer,t=Object(n.useSelector)((function(t){return Object(c.selectSourceById)(t,null===e||void 0===e?void 0:e.source)})),r=Object(i.useCartoLayerProps)({source:t});if(e&&t)return new a.a(Object(o.a)(Object(o.a)({},r),{},{id:s,getFillColor:[241,109,122],pointRadiusMinPixels:2,pickable:!0,onHover:function(e){(null===e||void 0===e?void 0:e.object)&&(e.object={html:Object(u.a)({feature:e.object}),style:{}})}}))}},1106:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return l}));var o=r(4),n=r(191),a=r(166),c=r(278),i=r(1091),u=r(1090),s="storesLayer";function l(){var e=Object(n.useSelector)((function(e){return e.carto.layers})).storesLayer,t=Object(n.useSelector)((function(t){return Object(c.selectSourceById)(t,null===e||void 0===e?void 0:e.source)})),r=Object(i.useCartoLayerProps)({source:t});if(e&&t)return new a.a(Object(o.a)(Object(o.a)({},r),{},{id:s,getFillColor:[255,255,100],pointRadiusMinPixels:2,pickable:!0,onHover:function(e){(null===e||void 0===e?void 0:e.object)&&(e.object={html:Object(u.a)({feature:e.object}),style:{}})}}))}},1167:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return O}));var o=r(0),n=r(1095),a=r(40),c={id:"storesSource",type:a.e.QUERY,connection:"carto_dw",data:"SELECT * FROM cartobq.public_account.retail_stores"},i={id:"usaDemographicsSource",type:a.e.TILESET,connection:"bqapp",data:"cartodb-on-gcp-pm-team.atena.airports_test_w_geo_tileset"},u=r(1106),s=r(191),l=r(278),d=r(551),f=r(1068),b=r(1066),m=r(439),p=r(1114),v=r(1092),j=r(22),y=Object(d.a)((function(){return{stores:{}}}));function O(){var e=Object(s.useDispatch)(),t=y();return Object(o.useEffect)((function(){return e(Object(l.addSource)(c)),e(Object(l.addSource)(i)),e(Object(l.addLayer)({id:n.a,source:i.id})),e(Object(l.addLayer)({id:u.a,source:c.id})),function(){e(Object(l.removeLayer)(u.a)),e(Object(l.removeLayer)(n.a)),e(Object(l.removeSource)(c.id))}}),[e]),Object(j.jsx)(f.a,{container:!0,direction:"column",className:t.stores,children:Object(j.jsx)(f.a,{item:!0,children:Object(j.jsxs)("div",{children:[Object(j.jsx)(p.FormulaWidget,{id:"totalRevenue",title:"Total revenue",dataSource:c.id,column:"revenue",operation:m.AggregationTypes.SUM,formatter:v.a}),Object(j.jsx)(b.a,{}),Object(j.jsx)(p.CategoryWidget,{id:"revenueByStoreType",title:"Revenue by store type",dataSource:c.id,column:"storetype",operationColumn:"revenue",operation:m.AggregationTypes.SUM,formatter:v.a})]})})})}}}]);
//# sourceMappingURL=12.cb957bba.chunk.js.map